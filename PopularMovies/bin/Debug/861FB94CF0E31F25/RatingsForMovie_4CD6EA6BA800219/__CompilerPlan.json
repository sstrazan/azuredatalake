{
"CompilerPlanStart":"8\/27\/2017 8:55:00 PM"
},
{
"Settings":"-c++ -mp -pdb Partial -OUTPUT_PATH C:\\Users\\slaven.strazanac\\AppData\\Local\\USQLDataRoot -cosmosCluster localhost -apEnvironment Default -apCluster localhost -Off ForceShadowCopy -On ADL -Off Sirius -On SQLIP -Off SQLIPSQLProxy -Off SQLIPSQLProxyNative -buckets 1 -SplitPartitionThreshold 52428800 -ClientVersion 10.2.2.0"
}{
"\/\/ Auto-generated header code\/\/ Auto-generated header code ended\/\/ User scriptDECLARE @mov":
{
"NodeName":"DeclareVariableStatement"
}{
"Name":"@movieRatingsFilePath"
}},
{
"DECLARE @movieDataFilePath = \"\/u100k.item\"":
{
"NodeName":"DeclareVariableStatement"
}{
"Name":"@movieDataFilePath"
}},
{
"DECLARE @movieId = 119":
{
"NodeName":"DeclareVariableStatement"
}{
"Name":"@movieId"
}},
{
"DECLARE @ratingsForMovieOutputPath = \"\/avgRatingsForMovie\" + @movieId + \".csv\"":
{
"NodeName":"DeclareVariableStatement"
}{
"Name":"@ratingsForMovieOutputPath"
}},
{
"    EXTRACT UserId int,            MovieId int,            Rating int,\t\t\tTimestamp double ":
{
"NodeName":"QueryStatement"
}},
{
"    SELECT MovieId, Rating    FROM @moviesRatings    WHERE MovieId == @movieId":
{
"NodeName":"QueryStatement"
}},
{
"    SELECT AVG((decimal)Rating) AS AvgRating    FROM @ratingsForMovie":
{
"NodeName":"QueryStatement"
}},
{
"OUTPUT @avgRatingForMovieTO @ratingsForMovieOutputPath\/\/ORDER BY NumberOfRatings DESC FETCH ":
{
"NodeName":"OutputStatement"
}},
{
"CompilerPlanEnd":"8\/27\/2017 8:55:00 PM"
}